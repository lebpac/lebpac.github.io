{% capture relative_baseurl %}{{ '/' | relative_url }}{% endcapture %}
{% assign page_paths = site.pages | map: "path" %}
{% assign sidebar_paths = site.sidebar_pages | default: page_paths %}

<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="{{ relative_baseurl }}">
          {{ site.title }}
        </a>
      </h1>
      <p class="lead">{{ site.description }}</p>
    </div>

    <nav class="sidebar-nav">

      {% comment %}
        Sidebar pages are defined in _config.yml
      {% endcomment %}

      {% for path in sidebar_paths %}
        {% assign node = site.pages | where: "path", path | first %}
        <div class="sidebar-nav-item{% if page.url == node.url %} active{% endif %}">
          {% if node.badge != null %}<a href="{{ node.url }}">{{ node.badge }}</a>{% endif %}
          <a href="{{ node.url }}">{{ node.title }}</a> 
        </div>
      {% endfor %}

    </nav>

  </div>
</div>
